<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GEORGES QSO LOG - 26-CT-1664</title>
<style>
  /* === Original Desktop Layout Styles === */
  body {
    font-family: Arial, sans-serif;
    background: #111a2a;
    color: #d0e6ff;
    margin: 0;
    padding: 20px;
  }

  h1 {
    text-align: center;
    margin-bottom: 1rem;
    color: #00d4ff;
    text-shadow: 0 0 10px #00d4ff;
  }

  .main-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    gap: 20px;
  }

  /* Left and right image containers */
  .side-image {
    width: 220px;
    border: 3px solid #00a8ff;
    border-radius: 8px;
    padding: 5px;
    box-shadow: 0 0 15px #00a8ff;
    animation: flashFast 1.5s infinite alternate;
    text-align: center;
    background: #111a2a;
  }
  .side-image img {
    width: 100%;
    height: auto;
    border-radius: 5px;
  }
  .side-image-label {
    margin-top: 5px;
    font-weight: bold;
    color: #00c0ff;
  }

  /* QSO Container */
  .qso-container {
    max-width: 1000px;
    overflow-x: auto;
    border: 2px solid #007acc;
    border-radius: 10px;
    box-shadow: 0 0 20px #007acc;
    animation: flashSlow 4s infinite alternate;
  }

  table {
    border-collapse: separate;
    border-spacing: 0 15px; /* vertical spacing between rows */
    width: 100%;
    min-width: 900px; /* ensure horizontal scroll if narrow */
    color: #d0e6ff;
  }

  thead tr th {
    background: #005ea8;
    padding: 12px 15px;
    text-align: left;
    color: #a0d4ff;
    border-radius: 8px 8px 0 0;
  }

  tbody tr {
    background: #123054;
  }

  tbody tr td {
    padding: 10px 12px;
  }

  /* Spacer column for gaps */
  td.spacer {
    width: 15px;
    background: transparent;
    padding: 0;
  }

  /* Animations */
  @keyframes flashSlow {
    0% { box-shadow: 0 0 20px #007acc; }
    100% { box-shadow: 0 0 50px #00b0ff; }
  }
  @keyframes flashFast {
    0% { box-shadow: 0 0 10px #00a8ff; }
    100% { box-shadow: 0 0 30px #00e0ff; }
  }

  /* === MOBILE ONLY === */
  @media (max-width: 720px) {
    body {
      padding: 10px;
    }

    .main-container {
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }

    /* Images stacked horizontally above QSO log */
    .side-image {
      width: 140px;
      animation: flashFast 0.8s infinite alternate;
      margin-bottom: 0;
    }
    /* Place both images in a row on mobile */
    .images-row {
      display: flex;
      justify-content: center;
      gap: 15px;
      width: 100%;
    }

    /* QSO Container adjustments */
    .qso-container {
      max-width: 100%;
      overflow-x: visible; /* disable horizontal scroll on mobile */
      animation: none;
      border: 2px solid #004f7f;
      box-shadow: none;
    }

    /* Hide table header */
    thead {
      display: none;
    }

    /* Make each row a block "card" */
    tbody tr {
      display: block;
      margin-bottom: 15px;
      background: #123054;
      border-radius: 12px;
      padding: 10px;
      box-shadow: 0 0 10px #005ea8;
    }

    tbody tr td {
      display: flex;
      justify-content: space-between;
      padding: 6px 10px;
      border-bottom: 1px solid #004f7f;
      font-size: 14px;
      color: #a0d4ff;
    }

    tbody tr td:last-child {
      border-bottom: none;
    }

    /* Spacer cells hidden on mobile */
    td.spacer {
      display: none;
    }

    /* Add label before value for each cell */
    tbody tr td::before {
      content: attr(data-label);
      font-weight: bold;
      color: #00c0ff;
      flex: 1;
    }
    tbody tr td span.value {
      flex: 1;
      text-align: right;
      color: #d0e6ff;
    }
  }
</style>
</head>
<body>
  <h1>GEORGES QSO LOG - 26-CT-1664</h1>
  <div class="main-container">

    <div class="side-image" id="leftImage">
      <img src="https://i.postimg.cc/hGmfcWG9/495291255-1051152326894974-7591054905816117297-n.jpg" alt="Rig" />
      <div class="side-image-label">Rig</div>
    </div>

    <div class="qso-container">
      <table id="qsoTable">
        <thead>
          <tr>
            <th>Date</th><td class="spacer"></td>
            <th>Time</th><td class="spacer"></td>
            <th>Name</th><td class="spacer"></td>
            <th>My Signal</th><td class="spacer"></td>
            <th>Location</th><td class="spacer"></td>
            <th>Contact Name</th><td class="spacer"></td>
            <th>Frequency</th><td class="spacer"></td>
            <th>Mode</th>
          </tr>
        </thead>
        <tbody id="qsoBody">
          <!-- Rows dynamically inserted here -->
        </tbody>
      </table>
    </div>

    <div class="side-image" id="rightImage">
      <img src="https://i.postimg.cc/ryfF6F9B/494740562-1046815160662024-7184481897838236543-n.jpg" alt="Antenna" />
      <div class="side-image-label">Antenna</div>
    </div>

  </div>

<script>
  const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQn_XSyS8DIfkZfQr8g1NDN4ZJLeO3LnOR87tOj3d1GybMhUCS0gtyyyKcvUshmFfGefofdlYcuDlqI/pub?output=csv";

  async function fetchAndUpdate() {
    try {
      const res = await fetch(csvUrl);
      if (!res.ok) throw new Error("Network response was not ok");

      const text = await res.text();
      const lines = text.trim().split('\n');

      // Remove header row (first line)
      lines.shift();

      const tbody = document.getElementById("qsoBody");
      tbody.innerHTML = "";

      lines.forEach(line => {
        const cols = line.split(',');

        if(cols.length < 8) return; // skip invalid rows

        const tr = document.createElement('tr');

        // Helper function to create td with data-label + span.value for mobile
        function createCell(label, val) {
          const td = document.createElement('td');
          td.setAttribute('data-label', label);
          const spanVal = document.createElement('span');
          spanVal.className = "value";
          spanVal.textContent = val;
          td.appendChild(spanVal);
          return td;
        }

        // Add cells with spacer td between main columns
        tr.appendChild(createCell('Date', cols[0]));
        tr.appendChild(createSpacer());
        tr.appendChild(createCell('Time', cols[1]));
        tr.appendChild(createSpacer());
        tr.appendChild(createCell('Name', cols[2]));
        tr.appendChild(createSpacer());
        tr.appendChild(createCell('My Signal', cols[3]));
        tr.appendChild(createSpacer());
        tr.appendChild(createCell('Location', cols[4]));
        tr.appendChild(createSpacer());
        tr.appendChild(createCell('Contact Name', cols[5]));
        tr.appendChild(createSpacer());
        tr.appendChild(createCell('Frequency', cols[6]));
        tr.appendChild(createSpacer());
        tr.appendChild(createCell('Mode', cols[7]));

        tbody.appendChild(tr);
      });
    } catch (e) {
      console.error("Error fetching CSV data:", e);
    }
  }

  function createSpacer() {
    const td = document.createElement('td');
    td.className = "spacer";
    td.textContent = "";
    return td;
  }

  fetchAndUpdate();
  setInterval(fetchAndUpdate, 30000);
</script>

</body>
</html>
