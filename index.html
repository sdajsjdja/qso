<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GEORGES QSO LOG - 26-CT-1664</title>
<style>
  /* Base styles */
  body {
    font-family: Arial, sans-serif;
    background: #111a2a;
    color: #d0e6ff;
    margin: 0;
    padding: 20px;
    overflow-x: hidden;
  }
  h1 {
    text-align: center;
    margin-bottom: 1rem;
    color: #00d4ff;
    text-shadow: 0 0 10px #00d4ff;
  }

  .container {
    display: flex;
    gap: 20px;
    justify-content: center;
    align-items: flex-start;
  }

  /* Images container */
  .images {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .image-box {
    border: 3px solid #00a8ff;
    border-radius: 8px;
    padding: 5px;
    box-shadow: 0 0 15px #00a8ff;
    animation: flashFast 1.5s infinite alternate;
    width: 200px;
  }

  .image-box img {
    width: 100%;
    height: auto;
    display: block;
    border-radius: 5px;
  }

  .image-label {
    text-align: center;
    margin-top: 5px;
    font-weight: bold;
    color: #00c0ff;
  }

  /* QSO table container */
  .qso-container {
    max-width: 850px;
    overflow-x: auto;
    border: 2px solid #007acc;
    border-radius: 10px;
    box-shadow: 0 0 20px #007acc;
    animation: flashSlow 4s infinite alternate;
  }

  table {
    border-collapse: separate;
    border-spacing: 0 15px; /* vertical spacing between rows */
    width: 100%;
    min-width: 800px; /* to enable horizontal scroll on desktop */
  }

  thead tr th {
    background: #005ea8;
    padding: 12px 15px;
    text-align: left;
    color: #a0d4ff;
    border-radius: 8px 8px 0 0;
  }

  tbody tr {
    background: #123054;
  }

  tbody tr td {
    padding: 10px 12px;
    color: #d0e6ff;
  }

  /* Add 1 column spacing between main columns by empty td */
  td.spacer {
    width: 15px;
    background: transparent;
    padding: 0;
  }

  /* Animations */
  @keyframes flashSlow {
    0% { box-shadow: 0 0 20px #007acc; }
    100% { box-shadow: 0 0 50px #00b0ff; }
  }
  @keyframes flashFast {
    0% { box-shadow: 0 0 10px #00a8ff; }
    100% { box-shadow: 0 0 30px #00e0ff; }
  }

  /* MOBILE STYLES */
  @media (max-width: 720px) {
    .container {
      flex-direction: column;
      align-items: center;
    }

    .images {
      flex-direction: row;
      gap: 15px;
      margin-bottom: 20px;
    }

    .image-box {
      width: 120px;
      animation: flashFast 0.75s infinite alternate;
    }

    .qso-container {
      max-width: 100%;
      overflow-x: visible; /* no horizontal scroll */
      animation: none;
      border: 2px solid #004f7f;
    }

    table {
      min-width: 0; /* remove min width for no scroll */
      border-spacing: 0;
      width: 100%;
    }

    thead {
      display: none; /* hide header on mobile */
    }

    tbody tr {
      display: block;
      margin-bottom: 20px;
      background: #123054;
      border-radius: 12px;
      padding: 10px;
      box-shadow: 0 0 12px #005ea8;
    }

    tbody tr td {
      display: flex;
      justify-content: space-between;
      padding: 6px 10px;
      border-bottom: 1px solid #004f7f;
      color: #a0d4ff;
      font-size: 14px;
    }

    tbody tr td:last-child {
      border-bottom: none;
    }

    /* Label on left, value on right */
    tbody tr td::before {
      content: attr(data-label);
      font-weight: bold;
      color: #00c0ff;
      flex: 1;
    }

    tbody tr td span.value {
      flex: 1;
      text-align: right;
      color: #d0e6ff;
    }

    td.spacer {
      display: none; /* hide spacer on mobile */
    }
  }
</style>
</head>
<body>
  <h1>GEORGES QSO LOG - 26-CT-1664</h1>
  <div class="container">
    <div class="images">
      <div class="image-box">
        <img src="https://i.postimg.cc/hGmfcWG9/495291255-1051152326894974-7591054905816117297-n.jpg" alt="Rig" />
        <div class="image-label">Rig</div>
      </div>
      <div class="image-box">
        <img src="https://i.postimg.cc/ryfF6F9B/494740562-1046815160662024-7184481897838236543-n.jpg" alt="Antenna" />
        <div class="image-label">Antenna</div>
      </div>
    </div>
    <div class="qso-container">
      <table id="qsoTable">
        <thead>
          <tr>
            <th>Date</th><th class="spacer"></th>
            <th>Time</th><th class="spacer"></th>
            <th>Name</th><th class="spacer"></th>
            <th>My Signal</th><th class="spacer"></th>
            <th>Location</th><th class="spacer"></th>
            <th>Contact Name</th><th class="spacer"></th>
            <th>Frequency</th><th class="spacer"></th>
            <th>Mode</th>
          </tr>
        </thead>
        <tbody id="qsoBody">
          <!-- Data rows inserted by JS -->
        </tbody>
      </table>
    </div>
  </div>

<script>
  const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQn_XSyS8DIfkZfQr8g1NDN4ZJLeO3LnOR87tOj3d1GybMhUCS0gtyyyKcvUshmFfGefofdlYcuDlqI/pub?output=csv";

  async function fetchAndUpdate() {
    try {
      const res = await fetch(csvUrl);
      if (!res.ok) throw new Error("Network response was not ok");

      const text = await res.text();
      const lines = text.trim().split('\n');

      // Remove header row (first line)
      lines.shift();

      const tbody = document.getElementById("qsoBody");
      tbody.innerHTML = "";

      lines.forEach(line => {
        const cols = line.split(',');

        if(cols.length < 8) return; // skip invalid rows

        const tr = document.createElement('tr');

        // Helper to add td with data-label for mobile
        function createCell(label, val) {
          const td = document.createElement('td');
          td.setAttribute('data-label', label);
          const spanVal = document.createElement('span');
          spanVal.className = "value";
          spanVal.textContent = val;
          td.appendChild(spanVal);
          return td;
        }

        tr.appendChild(createCell('Date', cols[0]));
        tr.appendChild(createSpacer());
        tr.appendChild(createCell('Time', cols[1]));
        tr.appendChild(createSpacer());
        tr.appendChild(createCell('Name', cols[2]));
        tr.appendChild(createSpacer());
        tr.appendChild(createCell('My Signal', cols[3]));
        tr.appendChild(createSpacer());
        tr.appendChild(createCell('Location', cols[4]));
        tr.appendChild(createSpacer());
        tr.appendChild(createCell('Contact Name', cols[5]));
        tr.appendChild(createSpacer());
        tr.appendChild(createCell('Frequency', cols[6]));
        tr.appendChild(createSpacer());
        tr.appendChild(createCell('Mode', cols[7]));

        tbody.appendChild(tr);
      });
    } catch (e) {
      console.error("Error fetching CSV data:", e);
    }
  }

  function createSpacer() {
    const td = document.createElement('td');
    td.className = "spacer";
    td.textContent = "";
    return td;
  }

  fetchAndUpdate();
  setInterval(fetchAndUpdate, 30000);
</script>

</body>
</html>
